{"version":3,"sources":["webpack:///D:/uniapp/blueToothLight/main.js","webpack:///D:/uniapp/blueToothLight/pages/equipmentDetail/equipmentDetail.vue?29c8","webpack:///D:/uniapp/blueToothLight/pages/equipmentDetail/equipmentDetail.vue?a170","webpack:///D:/uniapp/blueToothLight/pages/equipmentDetail/equipmentDetail.vue?31aa","webpack:///D:/uniapp/blueToothLight/pages/equipmentDetail/equipmentDetail.vue","webpack:///D:/uniapp/blueToothLight/pages/equipmentDetail/equipmentDetail.vue?dfc0"],"names":["Page","App","onLoad","option","uni","setNavigationBarTitle","title","deviceId","data","notifyServiceId","notifyCharacteristicsId","methods","sliderChange","e","console","log","detail","value","sendData","switchChange","target","createBLEConnection","closeBLEConnection","str","that","dataBuffer","ArrayBuffer","length","dataView","DataView","i","setUint8","charAt","charCodeAt","dataHex","ab2hex","writeDatas","hexCharCodeToStr","writeBLECharacteristicValue","serviceId","characteristicId","success","res","fail","complete","buffer","hexArr","Array","prototype","map","call","Uint8Array","bit","toString","slice","join","hexCharCodeStr","trimedStr","trim","rawStr","substr","toLowerCase","len","curCharCode","resultStr","parseInt","push","String","fromCharCode","showToast","icon","duration","errMsg","stopBluetoothDevicesDiscovery","hideToast","errCode"],"mappings":";;;;;;;;;;AAAA;AACA;AACI,qM;AACAA,IAAI,CAAC,+BAAYC,wBAAZ,CAAD,CAAJ,C;;;;;;;;;;;;ACHJ;AAAA;AAAA;AAAA;AAAA;AAA8F;AAC3B;AACL;;;AAG9D;AACmI;AACnI,gBAAgB,8IAAU;AAC1B,EAAE,qFAAM;AACR,EAAE,0FAAM;AACR,EAAE,mGAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACtCf;AAAA;AAAA;AAAA;AAA2oB,CAAgB,upBAAG,EAAC,C;;;;;;;;;;;;ACA/pB;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC4Be;AACdC,QAAM,EAAE,gBAASC,MAAT,EAAiB;AACxBC,OAAG,CAACC,qBAAJ,CAA0B;AACzBC,WAAK,EAAE,MADkB,EAA1B;;AAGA,SAAKC,QAAL,GAAgBJ,MAAM,CAACI,QAAP,GAAkB,EAAlC;AACA,GANa;AAOdC,MAPc,kBAOP;AACN,WAAO;AACND,cAAQ,EAAE,EADJ;AAENE,qBAAe,EAAC,EAFV;AAGNC,6BAAuB,EAAC,EAHlB,EAAP;;AAKA,GAba;AAcdC,SAAO,EAAE;AACRC,gBAAY,EAAE,sBAASC,CAAT,EAAY;AACzBC,aAAO,CAACC,GAAR,CAAY,gBAAgBF,CAAC,CAACG,MAAF,CAASC,KAArC;AACAC,cAAQ,CAACL,CAAC,CAACG,MAAF,CAASC,KAAV,CAAR;AACA,KAJO;AAKRE,gBAAY,EAAE,sBAASN,CAAT,EAAY;AACzBC,aAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBF,CAAC,CAACO,MAAF,CAASH,KAA7B;AACA,UAAIJ,CAAC,CAACO,MAAF,CAASH,KAAb,EAAoB,CAAE;AACrB,aAAKI,mBAAL;AACA,OAFD,MAEO,CAAE;AACR,aAAKC,kBAAL;AACA;AACD,KAZO;AAaR;AACAJ,YAAQ,EAAE,kBAASK,GAAT,EAAc;AACvB,UAAIC,IAAI,GAAG,IAAX;AACA,UAAIC,UAAU,GAAG,IAAIC,WAAJ,CAAgBH,GAAG,CAACI,MAApB,CAAjB;AACA,UAAIC,QAAQ,GAAG,IAAIC,QAAJ,CAAaJ,UAAb,CAAf;AACA,WAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,GAAG,CAACI,MAAxB,EAAgCG,CAAC,EAAjC,EAAqC;AACpCF,gBAAQ,CAACG,QAAT,CAAkBD,CAAlB,EAAqBP,GAAG,CAACS,MAAJ,CAAWF,CAAX,EAAcG,UAAd,EAArB;AACA;AACD,UAAIC,OAAO,GAAGV,IAAI,CAACW,MAAL,CAAYV,UAAZ,CAAd;AACA,WAAKW,UAAL,GAAkBZ,IAAI,CAACa,gBAAL,CAAsBH,OAAtB,CAAlB;AACA9B,SAAG,CAACkC,2BAAJ,CAAgC;AAC/B/B,gBAAQ,EAAEiB,IAAI,CAACjB,QADgB;AAE/BgC,iBAAS,EAAEf,IAAI,CAACf,eAFe;AAG/B+B,wBAAgB,EAAEhB,IAAI,CAACd,uBAHQ;AAI/BO,aAAK,EAAEQ,UAJwB;AAK/BgB,eAAO,EAAE,iBAASC,GAAT,EAAc;AACtB5B,iBAAO,CAACC,GAAR,CAAY,WAAWS,IAAI,CAACY,UAA5B;AACAtB,iBAAO,CAACC,GAAR,CAAY,aAAZ;AACA,SAR8B;AAS/B4B,YAAI,EAAE,cAASD,GAAT,EAAc,CAAE,CATS;AAU/BE,gBAAQ,EAAE,kBAASF,GAAT,EAAc,CAAE,CAVK,EAAhC;;AAYA,KAnCO;AAoCR;AACAP,UAAM,EAAE,gBAASU,MAAT,EAAiB;AACxB,UAAIC,MAAM,GAAGC,KAAK,CAACC,SAAN,CAAgBC,GAAhB,CAAoBC,IAApB;AACZ,UAAIC,UAAJ,CAAeN,MAAf,CADY;AAEZ,gBAASO,GAAT,EAAc;AACb,eAAO,CAAC,OAAOA,GAAG,CAACC,QAAJ,CAAa,EAAb,CAAR,EAA0BC,KAA1B,CAAgC,CAAC,CAAjC,CAAP;AACA,OAJW,CAAb;;AAMA,aAAOR,MAAM,CAACS,IAAP,CAAY,EAAZ,CAAP;AACA,KA7CO;AA8CR;AACAlB,oBAAgB,EAAE,0BAASmB,cAAT,EAAyB;AAC1C,UAAIC,SAAS,GAAGD,cAAc,CAACE,IAAf,EAAhB;AACA,UAAIC,MAAM,GAAGF,SAAS,CAACG,MAAV,CAAiB,CAAjB,EAAoB,CAApB,EAAuBC,WAAvB,OAAyC,IAAzC,GAAgDJ,SAAS,CAACG,MAAV,CAAiB,CAAjB,CAAhD,GAAsEH,SAAnF;AACA,UAAIK,GAAG,GAAGH,MAAM,CAAChC,MAAjB;AACA,UAAIoC,WAAJ;AACA,UAAIC,SAAS,GAAG,EAAhB;AACA,WAAK,IAAIlC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgC,GAApB,EAAyBhC,CAAC,GAAGA,CAAC,GAAG,CAAjC,EAAoC;AACnCiC,mBAAW,GAAGE,QAAQ,CAACN,MAAM,CAACC,MAAP,CAAc9B,CAAd,EAAiB,CAAjB,CAAD,EAAsB,EAAtB,CAAtB;AACAkC,iBAAS,CAACE,IAAV,CAAeC,MAAM,CAACC,YAAP,CAAoBL,WAApB,CAAf;AACA;AACD,aAAOC,SAAS,CAACT,IAAV,CAAe,EAAf,CAAP;AACA,KA1DO;AA2DR;;;AAGAlC,uBAAmB,EAAE,+BAAW;AAC/BjB,SAAG,CAACiE,SAAJ,CAAc;AACb/D,aAAK,EAAE,SADM;AAEbgE,YAAI,EAAE,SAFO;AAGbC,gBAAQ,EAAE,KAHG,EAAd;;AAKA,UAAIhE,QAAQ,GAAG,KAAKA,QAApB;AACAH,SAAG,CAACiB,mBAAJ,CAAwB;AACvB;AACAd,gBAAQ,EAARA,QAFuB;AAGvBkC,eAAO,EAAE,iBAAAC,GAAG,EAAI;AACf5B,iBAAO,CAACC,GAAR,CAAY2B,GAAZ;AACA5B,iBAAO,CAACC,GAAR,CAAY,YAAY2B,GAAG,CAAC8B,MAA5B;AACA;AACA,eAAI,CAACC,6BAAL;AACArE,aAAG,CAACsE,SAAJ;AACAtE,aAAG,CAACiE,SAAJ,CAAc;AACb/D,iBAAK,EAAE,MADM;AAEbgE,gBAAI,EAAE,SAFO;AAGbC,oBAAQ,EAAE,IAHG,EAAd;;AAKA,SAdsB;AAevB5B,YAAI,EAAE,cAAA9B,CAAC,EAAI;AACVC,iBAAO,CAACC,GAAR,CAAY,mBAAmBF,CAAC,CAAC8D,OAAjC;;AAEA,SAlBsB,EAAxB;;AAoBA,KAzFO;AA0FR;;;AAGAF,iCAA6B,EAAE,yCAAW;AACzCrE,SAAG,CAACqE,6BAAJ,CAAkC;AACjChC,eAAO,EAAE,iBAAA5B,CAAC,EAAI;AACbC,iBAAO,CAACC,GAAR,CAAY,cAAcF,CAAC,CAAC2D,MAA5B;AACA,SAHgC;AAIjC7B,YAAI,EAAE,cAAA9B,CAAC,EAAI;AACVC,iBAAO,CAACC,GAAR,CAAY,oBAAoBF,CAAC,CAAC8D,OAAlC;AACA,SANgC,EAAlC;;AAQA,KAtGO;AAuGR;;;AAGArD,sBAAkB,EAAE,8BAAW;AAC9B,UAAIf,QAAQ,GAAG,KAAKA,QAApB;AACAH,SAAG,CAACkB,kBAAJ,CAAuB;AACtBf,gBAAQ,EAARA,QADsB;AAEtBkC,eAAO,EAAE,iBAAAC,GAAG,EAAI;AACf5B,iBAAO,CAACC,GAAR,CAAY2B,GAAZ;AACA5B,iBAAO,CAACC,GAAR,CAAY,eAAe2B,GAAG,CAAC8B,MAA/B;AACA,SALqB;AAMtB7B,YAAI,EAAE,cAAA9B,CAAC,EAAI;AACVC,iBAAO,CAACC,GAAR,CAAY,mBAAmBF,CAAC,CAAC8D,OAAjC;AACA,SARqB,EAAvB;;AAUA,KAtHO,EAdK,E;;;;;;;;;;;;;AC5Bf;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA,gBAAgB,gDAAgD;AAChE,kBAAkB,2BAA2B;AAC7C;AACA;AACA,kBAAkB,uDAAuD;AACzE,eAAe;AACf,SAAS;AACT;AACA;AACA,gBAAgB,gDAAgD;AAChE,kBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,eAAe;AACf,SAAS;AACT;AACA;AACA;AACA;AACA;AACA","file":"pages/equipmentDetail/equipmentDetail.js","sourcesContent":["import 'uni-pages';\nimport pageFactory from 'mpvue-page-factory'\n    import App from './pages/equipmentDetail/equipmentDetail.vue'\n    Page(pageFactory(App))","import { render, staticRenderFns } from \"./equipmentDetail.vue?vue&type=template&id=ce923906&\"\nimport script from \"./equipmentDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./equipmentDetail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../tools/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\tools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('ce923906', component.options)\n    } else {\n      api.reload('ce923906', component.options)\n    }\n    module.hot.accept(\"./equipmentDetail.vue?vue&type=template&id=ce923906&\", function () {\n      api.rerender('ce923906', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"uniapp/blueToothLight/pages/equipmentDetail/equipmentDetail.vue\"\nexport default component.exports","import mod from \"-!../../../../tools/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--18-0!../../../../tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../tools/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./equipmentDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../tools/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--18-0!../../../../tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../tools/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./equipmentDetail.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../tools/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../tools/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./equipmentDetail.vue?vue&type=template&id=ce923906&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport default {\n\tonLoad: function(option) {\n\t\tuni.setNavigationBarTitle({\n\t\t\ttitle: '设备控制'\n\t\t});\n\t\tthis.deviceId = option.deviceId + '';\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tdeviceId: '',\n\t\t\tnotifyServiceId:'',\n\t\t\tnotifyCharacteristicsId:''\n\t\t};\n\t},\n\tmethods: {\n\t\tsliderChange: function(e) {\n\t\t\tconsole.log('value 发生变化：' + e.detail.value);\n\t\t\tsendData(e.detail.value);\n\t\t},\n\t\tswitchChange: function(e) {\n\t\t\tconsole.log('携带值为', e.target.value);\n\t\t\tif (e.target.value) { //连接蓝牙\n\t\t\t\tthis.createBLEConnection();\n\t\t\t} else { //关闭蓝牙\n\t\t\t\tthis.closeBLEConnection();\n\t\t\t}\n\t\t},\n\t\t//向蓝牙设备发送数据\n\t\tsendData: function(str) {\n\t\t\tlet that = this;\n\t\t\tlet dataBuffer = new ArrayBuffer(str.length)\n\t\t\tlet dataView = new DataView(dataBuffer)\n\t\t\tfor (var i = 0; i < str.length; i++) {\n\t\t\t\tdataView.setUint8(i, str.charAt(i).charCodeAt())\n\t\t\t}\n\t\t\tlet dataHex = that.ab2hex(dataBuffer);\n\t\t\tthis.writeDatas = that.hexCharCodeToStr(dataHex);\n\t\t\tuni.writeBLECharacteristicValue({\n\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\tserviceId: that.notifyServiceId,\n\t\t\t\tcharacteristicId: that.notifyCharacteristicsId,\n\t\t\t\tvalue: dataBuffer,\n\t\t\t\tsuccess: function(res) {\n\t\t\t\t\tconsole.log('发送的数据：' + that.writeDatas)\n\t\t\t\t\tconsole.log('message发送成功')\n\t\t\t\t},\n\t\t\t\tfail: function(res) {},\n\t\t\t\tcomplete: function(res) {}\n\t\t\t})\n\t\t},\n\t\t/*转成二进制*/\n\t\tab2hex: function(buffer) {\n\t\t\tvar hexArr = Array.prototype.map.call(\n\t\t\t\tnew Uint8Array(buffer),\n\t\t\t\tfunction(bit) {\n\t\t\t\t\treturn ('00' + bit.toString(16)).slice(-2)\n\t\t\t\t}\n\t\t\t)\n\t\t\treturn hexArr.join('')\n\t\t},\n\t\t/*转成可展会的文字*/\n\t\thexCharCodeToStr: function(hexCharCodeStr) {\n\t\t\tvar trimedStr = hexCharCodeStr.trim();\n\t\t\tvar rawStr = trimedStr.substr(0, 2).toLowerCase() === '0x' ? trimedStr.substr(2) : trimedStr;\n\t\t\tvar len = rawStr.length;\n\t\t\tvar curCharCode;\n\t\t\tvar resultStr = [];\n\t\t\tfor (var i = 0; i < len; i = i + 2) {\n\t\t\t\tcurCharCode = parseInt(rawStr.substr(i, 2), 16);\n\t\t\t\tresultStr.push(String.fromCharCode(curCharCode));\n\t\t\t}\n\t\t\treturn resultStr.join('');\n\t\t},\n\t\t/**\n\t\t * 连接低功耗蓝牙\n\t\t */\n\t\tcreateBLEConnection: function() {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '连接蓝牙...',\n\t\t\t\ticon: 'loading',\n\t\t\t\tduration: 99999\n\t\t\t});\n\t\t\tlet deviceId = this.deviceId;\n\t\t\tuni.createBLEConnection({\n\t\t\t\t// 这里的 deviceId 需要已经通过 createBLEConnection 与对应设备建立链接\n\t\t\t\tdeviceId,\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t\tconsole.log('连接蓝牙成功:' + res.errMsg);\n\t\t\t\t\t// 连接设备后断开搜索 并且不能搜索设备\n\t\t\t\t\tthis.stopBluetoothDevicesDiscovery();\n\t\t\t\t\tuni.hideToast();\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '连接成功',\n\t\t\t\t\t\ticon: 'success',\n\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tfail: e => {\n\t\t\t\t\tconsole.log('连接低功耗蓝牙失败，错误吗：' + e.errCode);\n\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * 停止搜索蓝牙设备\n\t\t */\n\t\tstopBluetoothDevicesDiscovery: function() {\n\t\t\tuni.stopBluetoothDevicesDiscovery({\n\t\t\t\tsuccess: e => {\n\t\t\t\t\tconsole.log('停止搜索蓝牙设备:' + e.errMsg);\n\t\t\t\t},\n\t\t\t\tfail: e => {\n\t\t\t\t\tconsole.log('停止搜索蓝牙设备失败，错误吗：' + e.errCode);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * 断开与低功耗蓝牙设备的连接\n\t\t */\n\t\tcloseBLEConnection: function() {\n\t\t\tlet deviceId = this.deviceId;\n\t\t\tuni.closeBLEConnection({\n\t\t\t\tdeviceId,\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t\tconsole.log('断开低功耗蓝牙成功:' + res.errMsg);\n\t\t\t\t},\n\t\t\t\tfail: e => {\n\t\t\t\t\tconsole.log('断开低功耗蓝牙成功，错误吗：' + e.errCode);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t}\n}\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"view\", [\n    _c(\"view\", { staticClass: \"uni-padding-wrap uni-common-mt\" }, [\n      _c(\"view\", { staticClass: \"uni-title\" }, [_vm._v(\"开灯/关灯\")]),\n      _c(\"view\", [\n        _c(\"switch\", {\n          attrs: { color: \"#F76260\", checked: \"\", eventid: \"861fd408-0\" },\n          on: { change: _vm.switchChange }\n        })\n      ])\n    ]),\n    _c(\"view\", { staticClass: \"uni-padding-wrap uni-common-mt\" }, [\n      _c(\"view\", { staticClass: \"uni-title\" }, [_vm._v(\"亮度\")]),\n      _c(\"view\", [\n        _c(\"slider\", {\n          attrs: {\n            \"block-color\": \"#FFB400\",\n            activeColor: \"#F76260\",\n            value: \"50\",\n            min: \"0\",\n            max: \"100\",\n            \"show-value\": \"\",\n            eventid: \"861fd408-1\"\n          },\n          on: { change: _vm.sliderChange }\n        })\n      ])\n    ])\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }"],"sourceRoot":""}